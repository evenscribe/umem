syntax = "proto3";

import "google/protobuf/empty.proto";

package memory;

service MemoryService {
  // Qdrant Mutations
  rpc AddMemory(Memory) returns (google.protobuf.Empty);
  rpc AddMemoryBulk(MemoryBulk) returns (google.protobuf.Empty);
  rpc ModifyMemory(ModifyMemoryParameters) returns (google.protobuf.Empty);
  rpc DeleteMemory(DeleteMemoryParameters) returns (google.protobuf.Empty);

  // Qdrant Queries
  rpc GetMemoryByQuery(GetMemoriesByQueryParameters) returns (MemoryBulk);
  rpc GetMemoryByUserID(GetMemoriesByUserIDParameters) returns (MemoryBulk);
}

message Memory {
  string user_id = 1; // tenant
  string memory_id = 2;
  string content = 3;
  string priority = 4;
  repeated string tags = 5;

  string created_at = 6;
  string updated_at = 7;
}

message MemoryBulk { repeated Memory memories = 1; }

message ModifyMemoryParameters {
  string memory_id = 1;
  string content = 2;
  string priority = 3;
  repeated string tags = 4;
}

message DeleteMemoryParameters { string memory_id = 1; }

message GetMemoriesByQueryParameters {
  string user_id = 1;
  string query = 2;
}

message GetMemoriesByUserIDParameters { string user_id = 1; }
